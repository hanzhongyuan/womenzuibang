# coding=UTF-8
txt="""案情

    甲、乙、丙三人分别与某单位于２００２年１月１０日签订房屋租赁合同，合同约定：三人分别租赁该单位商场五个门面中的一个，租期一年，从２００２年１月１０日至同年１２月１０日，按季交纳租金。合同签订后，三租赁户向该单位交纳了上半年的租金。同年６月１５日，该单位未通知三租户商场即将出售的情况下，与另外三人丁、戊、己签订了房屋买卖合同，将三租户门面在内的商场整栋房屋出售。同日，该单位召集所有租户开会，告之商场整栋房屋已出售，但不终止租赁合同，同年７月１日以后的租金由丁、戊、己收取。甲、乙、丙不服，以该单位侵犯了自己优先购买权，向法院起诉，请求判令该单位与三购房户的房屋买卖协议无效，并赔偿经济损失。

    争议?承租人的优先购买权是否及于涵盖租赁物的整栋房屋？

    第一种观点认为，当出租人出卖超出租赁物范围的整栋房屋时，承租人不享有优先购买权。

    第二种观点认为，只要出租人出卖的房屋涵盖出租房屋，承租人就享有优先购买权。

    第三种观点认为，出租人出卖出租房屋时，承租人是否享有优先购买权，要分两种情况，如果出卖房屋超出了租赁房屋范围，超出部分与租赁房屋部分可以分割，出租人又是分割出卖，承租人只能就承租部分的房屋主张优先购买权，对超出承租范围的房屋部分不能主张优先购买权。如果出卖房屋超出了租赁房屋范围，而超出部分与租赁房屋部分不可分割，或虽可分割，但出租人不分开出卖，是整体出卖。出租人出卖的房屋只要涵盖出租房屋，即使出卖房屋超出了出租房屋范围，是整栋房屋，承租人即享有优先购买权。

    评议

    ?笔者同意第三种观点，理由如下：

    在出租人出卖涵盖出租房屋的整栋房屋时，承租人是否享有优先购买权，取决于整栋房屋与租赁房屋是否可以分割出卖，在可以分割出卖的情况下，出租人是分割出卖，还是整体出卖。如果超出租赁范围的房屋部分与租赁房屋可以分割出卖，出租人是分割出卖房屋，承租人只能就承租的房屋享有优先购买权。因为法律赋予承租人的优先购买权范围仅限于租赁房屋范围，现出租人出卖的房屋又是分割出卖，出租人出卖租赁范围外的房屋，没有法律义务让承租人行使优先购买权，否则，就侵犯了出租人的权利。相反，在此情况下，不让承租人行使超出租赁范围外的房屋优先购买权，也没有侵犯承租人权利。因为法律赋予承租人的优先购买权权限范围到此为止。如果超出租赁范围的房屋部分与租赁房屋无法分割出卖，或虽可分割出卖，但出租人不同意分割出卖，要求整体出卖，承租人就整栋房屋享有优先购买权。因为超出部分与租赁部分不可分割，或虽可分割，但出租人不同意分割出卖，要求整体出卖，在此情况下，出租人出卖的房屋涵盖了租赁房屋，其出卖行为直接影响到承租人的利益，必须考虑承租人的优先购买权问题。承租人行使优先购买权的范围虽然超出了租赁范围，但有充分的理由：超出部分与租赁部分房屋连为一体，无法分割，或虽可分割，但因出租人原因，要求整体出卖，均使承租人无法单独行使优先购买权。让承租人行使优先购买权并不影响出租人利益。反之，不让承租人行使优先购买权，则侵犯了承租人的优先购买权，影响承租人利益。

    承租人的优先购买权是法定的，没有附加任何条件，不因出租人出卖房屋超出承租房屋范围而改变。根据最高人民法院《关于贯彻执行〈中华人民共和国民法通则〉若干问题的意见》第１１８条、合同法第二百三十条规定，出租人出卖出租房屋，应当在出卖前的合理期限内，通知承租人，承租人享有以同等条件优先购买的权利。承租人的这种优先性是法定的，不附加任何条件，不因出租人出卖出租物超出了租赁物范围而改变，只要出卖房屋涵盖了租赁房屋部分，承租人就享有优先购买权。

    上述第一种观点是适用法律中典型的形而上学主义，也是片面机械地理解优先购买权的法律规定。只要稍微转换一下出租人出卖整栋房屋的性质审视角度，就会得出承租人是否享有优先购买权的正确结论。出租人超出租赁房屋范围出卖整栋房屋，并未改变出卖租赁房屋的性质，仍然是出卖租赁房屋的行为。因为其出卖的标的物含有租赁物，只是大于租赁物。难道说出租人超出租赁房屋范围出卖整栋房屋，就不是出卖租赁房屋吗？很显然不能得出这个结论。那么怎么看待出租人的整体出卖行为呢？笔者认为，出租人整体出卖出租房屋并未改变其出卖租赁房屋的性质，其要求超范围整体出卖房屋只是其出卖的条件，不能看作改变了出卖标的物。承租人愿不愿意接受整体出卖，是其能否实际行使优先购买权的前提。法律规定承租人的优先购买权不是无条件的，而是有条件的，必须在同等条件下行使。在该案中，具体表现为甲、乙、丙三租户是否愿意接受出租单位的整体出卖条件，是否愿意以同等价格接受。但这些都属于承租人怎样行使优先购买权的问题，而不是承租人是否享有优先购买权的问题。承租人的优先购买权首先得由出租人于出卖前合理期限通知后，才能实际开始行使。出租人可明确告知承租人房屋出卖的条件是超范围整体出卖，承租人愿意接受整体出卖条件，承租人即享受优先购买权，不愿接受该条件，承租人则放弃了优先购买权，出租人可依法对外出卖。

    出租人整体出卖房屋，承租人行使优先购买权，有利于维护交易秩序的稳定，兼顾出租人和承租人利益，符合优先购买权的立法精神和目的。优先购买权的立法精神和目的就是要赋予承租人在购买承租房屋时的优先性，使出租人和承租人的租赁法律关系不因出租人的出卖行为而受到影响，维护交易秩序的稳定，促进市场经济的发展。出租人出卖租赁房屋，在同等条件下，卖给第三人和卖给承租人，其利益不受任何影响，出租人卖给承租人更有利于保护承租人利益。基于承租人承租出租人房屋的事实前提，故法律规定承租人的优先购买权。出租人整体出卖房屋时，在同等条件下，承租人享有优先购买权，照样对出租人利益不构成影响，相反能兼顾承租人利益，使租赁房屋不因出租人出卖房屋受任何影响，符合优先购买权的立法精神和目的。

    在以上案例中，出租单位不是分割出卖商场的各个门面房屋，而是整体出卖包括甲、乙、丙三租赁户租赁门面在内的整栋房屋，出租单位应在出卖前通知三租赁户。三租赁户在同等条件下，有优先购买权。出租单位出卖房屋时，并未通知承租人，侵犯了承租人的优先购买权。承租人主张优先购买权，请求确认出租单位的房屋买卖无效，应依法支持。"""

title='门面承租人能否主张优先购买权'

####################################################################################################################






import jieba.analyse


# #去除多余字符
# def clearSen(comment):
#     comment = comment.strip(' ')
#     comment = comment.replace('、','')
#     comment = comment.replace('~','。')
#     comment = comment.replace('～','')
#     comment = comment.replace('{"error_message": "EMPTY SENTENCE"}','')
#     comment = comment.replace('…','')
#     comment = comment.replace('\r', '')
#     comment = comment.replace('\t', ' ')
#     comment = comment.replace('\f', ' ')
#     comment = comment.replace('/', '')
#     comment = comment.replace('、', ' ')
#     comment = comment.replace('/', '')
#     comment = comment.replace('.', '')
#     comment = comment.replace('。', '')
#     comment = comment.replace('_', '')
#     comment = comment.replace('?', ' ')
#     comment = comment.replace('？', ' ')
#     comment = comment.replace('了', '')
#     comment = comment.replace('➕', '')
#     comment = comment.replace(':', '')
#     comment = comment.replace('：', '')
#     return comment




def summarize(txt,title):#传入文本和标题
    #结巴分词处理搜索词
    seg_list = (" ".join(jieba.cut_for_search(title))).split(" ")




    #统计文本词频
    keywords = jieba.analyse.extract_tags(txt, topK=20, withWeight=True, allowPOS=())
    search_list=[]

    #寻找文本和标题重合关键词
    for item in keywords:
        for item1 in seg_list:
           if (len(search_list)) < 5:
                if item[0]==item1:
                    search_list.append(item1)
    line = txt.split('。'or"？"or"！"or'!'or"."or"?")#切割文本
    #统计整片文章的词频
    time=[]
    for i in range(0,len(line)-2):
        times = 0
        for j in search_list:
            count=str(line[i]+line[i+1]+line[i+2]).count(j)#统计词频
            times=times+count
        time.append(times)
    times=time.index(max(time))#词频排序输出最大值
    print((line[times]+line[times+1]+line[times+2])[0:40])#输出40字以内词频匹配度最高的句子


summarize(txt,title)
